(this["webpackJsonpmovie-ratings-app"]=this["webpackJsonpmovie-ratings-app"]||[]).push([[0],{100:function(e,t,n){e.exports={root:"error-message_root__1fZb_",title:"error-message_title__2fMjM"}},101:function(e,t,n){e.exports={root:"search-page_root__2Nc1S",searchHead:"search-page_searchHead__1M6GA"}},102:function(e,t,n){e.exports={root:"circled-progress-bar_root__2mkbI",scoreValue:"circled-progress-bar_scoreValue__1k3e4",loadingPulse:"circled-progress-bar_loadingPulse__FHvDD",opacityPulse:"circled-progress-bar_opacityPulse__3VR5b"}},103:function(e,t,n){e.exports={root:"movie-view-screen_root__2Ig-W",transitionDiv:"movie-view-screen_transitionDiv__3fEVy"}},112:function(e,t,n){e.exports=function(){return new Worker(n.p+"61e5ac1b1711edde28bd.worker.js")}},12:function(e,t,n){"use strict";var a=n(18),r=n.n(a),o=n(31),i=n(36),c=Object({NODE_ENV:"production",PUBLIC_URL:"/movie-ratings-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_KEY:"a44864e428db2c92b5da8792195a9779"}),s=c.REACT_APP_API_KEY,u=c.NODE_ENV,l="https://api.themoviedb.org/3",m="development"===u?"http://192.168.1.8:3000/":"http://jrdeveloper.me/movie-ratings-app/",d=function(){return"api_key=".concat(s)},v=function(){return"session_id=".concat(localStorage.getItem("session_id"))},f={itemsPerPageUI:9,getPosterSrcPathPrefix:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"200";return"https://image.tmdb.org/t/p/w".concat(e)},buildFetchMovieSearchUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"".concat(l,"/search/movie?").concat(d(),"&query=").concat(e,"&page=").concat(t,"&include_adult=false")},buildFetchMovieViewUrl:function(e,t){return"".concat(l,"/movie/").concat(e).concat(t||"","?").concat(d())},searchPageTransitionConfig:{duration:400,easing:i.b},newSessionUrl:"".concat(l,"/authentication/session/new?").concat(d()),getAccountUrl:function(e){return"".concat(l,"/account?").concat(d(),"&session_id=").concat(e)},getLogoutConfig:function(e){return["".concat(l,"/authentication/session?").concat(d()),{method:"DELETE",body:JSON.stringify({session_id:e}),headers:{"Content-Type":"application/json"}}]},newRequestTokenUrl:"".concat(l,"/authentication/token/new?").concat(d()),buildLoginRedirectUrl:function(e){return"https://www.themoviedb.org/authenticate/".concat(e,"?redirect_to=").concat(m)},itemActions:{favorite:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l,"/account/0/favorite?").concat(d(),"&").concat(v()),e.next=3,fetch(a,{body:JSON.stringify({media_type:"movie",media_id:n,favorite:t}),headers:{"Content-Type":"application/json;charset=utf-8"},method:"POST"});case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),watchlist:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l,"/account/0/watchlist?").concat(d(),"&").concat(v()),e.next=3,fetch(a,{body:JSON.stringify({media_type:"movie",media_id:n,watchlist:t}),headers:{"Content-Type":"application/json;charset=utf-8"},method:"POST"});case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rate:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l,"/movie/").concat(n,"/rating?").concat(d(),"&").concat(v()),e.next=3,fetch(a,{body:JSON.stringify({value:t}),headers:{"Content-Type":"application/json;charset=utf-8"},method:"POST"});case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),unRate:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(l,"/movie/").concat(t,"/rating?").concat(d(),"&").concat(v()),e.next=3,fetch(n,{headers:{"Content-Type":"application/json;charset=utf-8"},method:"DELETE"});case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getItemsBrowseUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=l;switch(e){case"favorite":a+="/account/0/favorite/movies";break;case"watchlist":a+="/account/0/watchlist/movies";break;case"search":a+="/search/movie";break;case"nowPlaying":a+="/movie/now_playing";break;case"trendingWeek":a+="/trending/movie/week"}switch(a+="?",e){case"favorite":case"watchlist":a+=v()+"&sort_by=created_at.desc";break;case"search":a+="query=".concat(t,"&include_adult=false")}return a+"&"+d()+"&page=".concat(n)}};t.a=f},122:function(e,t,n){e.exports={bob:"pagination-controls_bob__1kgUG",root:"pagination-controls_root__17AgS"}},125:function(e,t,n){e.exports={root:"movie-results-container_root__2rRnr",grid:"movie-results-container_grid__t-GlL"}},127:function(e,t,n){e.exports={root:"total-search-results_root__302j4"}},128:function(e,t,n){e.exports={root:"movie-item-img-bg_root__N-Q75"}},134:function(e,t,n){e.exports={root:"movies-grid_root__Bm5D1"}},135:function(e,t,n){e.exports={root:"movie-view-background_root__2pCqN"}},136:function(e,t,n){e.exports={root:"movie-view-related_root__1_IrX",loadingPulse:"movie-view-related_loadingPulse__1CnAp",opacityPulse:"movie-view-related_opacityPulse__fpUUx"}},149:function(e,t,n){e.exports=n(168)},15:function(e,t,n){"use strict";var a=n(33),r=n(9),o=n(32),i=n(6),c={item:null},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.a.SET_MOVIE_VIEW:return Object(i.v)("movieId",t.payload.id),Object(r.a)({},e,{item:t.payload});case o.a.CLEAR_MOVIE_VIEW:return Object(r.a)({},c);default:return e}},u=n(57),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.SET_USER:return t.payload;case u.a.CLEAR_USER:return null;default:return e}},m=n(19),d=n(27),v={searchData:null,searchError:null,isFetching:!1,isFetchingMore:!1,apiFetchedPages:[],searchTerm:""};function f(e,t){var n=t;for(var a in e){var r=e[a];e[a]=n,n=r}return e[Object.keys(e).length]=n,e}function p(e,t){var n=!1;for(var a in e){var r,o=Number(a);((null===(r=e[o])||void 0===r?void 0:r.id)===t||n)&&(n?e[o-1]=e[o]:(e[o]=void 0,n=!0))}return n&&delete e[Object.keys(e).length-1],e}var h=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=arguments.length>1?arguments[1]:void 0;if(n.name!==e)return t;switch(n.type){case d.a.UNSHIFT_TO_LIST_ITEMS:return Object(r.a)({},t,{searchData:t.searchData&&Object(r.a)({},t.searchData,{results:f(Object(r.a)({},t.searchData.results),n.payload),total_pages:Math.ceil((t.searchData.total_results+1)/20),total_results:t.searchData.total_results+1})});case d.a.REMOVE_FROM_LIST_ITEMS:return Object(r.a)({},t,{searchData:t.searchData&&Object(r.a)({},t.searchData,{results:p(Object(r.a)({},t.searchData.results),n.payload),total_pages:Math.ceil((t.searchData.total_results-1)/20),total_results:t.searchData.total_results-1})});case d.a.CLEAR_FETCHED_MOVIES:return v;case d.a.FETCH_MOVIES_START:return Object(r.a)({},v,{isFetching:!0});case d.a.FETCH_MOVIES_SUCCESS:var a=n.payload.data;return a.total_results?Object(r.a)({},v,{searchData:a,apiFetchedPages:[1],searchTerm:n.payload.searchTerm||""}):Object(r.a)({},v,{searchError:{errors:["No results found."]}});case d.a.FETCH_MOVIES_FAILURE:return Object(r.a)({},v,{searchError:n.payload});case d.a.FETCH_MORE_MOVIES_START:return Object(r.a)({},t,{isFetchingMore:!0});case d.a.FETCH_MORE_MOVIES_SUCCESS:return Object(r.a)({},t,{searchData:Object(r.a)({},t.searchData,{results:Object(r.a)({},t.searchData.results,{},n.payload.results),page:n.payload.fetchedPage}),apiFetchedPages:Object(m.a)(new Set([].concat(Object(m.a)(t.apiFetchedPages),[n.payload.fetchedPage]))),isFetchingMore:!1});case d.a.FETCH_MORE_MOVIES_FAILURE:return Object(r.a)({},t,{searchError:n.payload,isFetchingMore:!1});default:return t}}},g=Object(a.c)({trendingWeek:h("trendingWeek"),nowPlaying:h("nowPlaying"),watchlist:h("watchlist"),favorite:h("favorite"),search:h("search"),user:l,movieItem:s}),_=n(137);var b=Object(_.a)({reducer:g});t.a=b},154:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),i=n(204),c=n(118),s=n.n(c),u=n(113),l=n.n(u),m=n(117),d=n.n(m),v=n(83),f=n.n(v),p=n(84),h=n.n(p),g=n(119),_=n.n(g),b=n(39),E=n.n(b),O=n(63),w=n(6);var j=function(){var e=Object(a.useState)("/"),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useLayoutEffect)((function(){r(Object(w.f)());var e=function(e){var t=e.oldURL,n=e.newURL,a=Object(w.f)(t),o=Object(w.f)(n);a!==o&&r(o)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),n},y=n(19),S=n(15),I=n(50),k=n(12),M=n(57),N=k.a.getLogoutConfig,C=k.a.buildLoginRedirectUrl,T=function(e){return e.user},R=function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)};function L(){var e=localStorage.getItem("session_id");e&&fetch.apply(void 0,Object(y.a)(N(e))).then((function(e){return e.json()})).then((function(e){e.success&&(console.log("logout success"),alert("Successfully logged out."),S.a.dispatch(Object(M.b)()),localStorage.removeItem("session_id"))})).catch(console.log)}function x(e){window.open(C(e),"_blank")}var F=function(){var e=Object(I.b)(T,R);return{user:e,isAuth:!!e,signOut:L,signIn:x}};var P=function(){var e=Object(a.useState)((function(){return Object(w.b)()})),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){r(Object(w.b)())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n},A=n(27),V=Object(A.b)("search"),U=[{icon:l.a,text:"Home",to:"/"},{icon:d.a,text:"Search",to:"/search"},{icon:f.a,text:"Favorites",to:"/favorites"},{icon:h.a,text:"Watchlist",to:"/watchlist"}],D=function(e){var t=e.icon,n=e.text,a=e.to,o=e.setOpen,c=e.active,s=e.username,u=P();return r.a.createElement(O.b,{to:a,className:E.a.navItem,onClick:function(e){if(e.currentTarget===e.target)return e.preventDefault();!u&&o(!1),"/search"===a&&c&&S.a.dispatch(V.clearFetchedMovies())},"aria-current":c},r.a.createElement(i.a,{color:"inherit","aria-label":"menu",className:E.a.navItemIcon},s?r.a.createElement("div",{className:E.a.avatar},s.charAt(0).toUpperCase()):r.a.createElement(t,null)),n&&r.a.createElement("span",{className:E.a.navItemTxt},n))},W=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],u=j(),l=F().user;return r.a.createElement("nav",{className:"".concat(E.a.root," ").concat(n?E.a.isOpen:""),onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},r.a.createElement("ul",{className:E.a.toolBar},r.a.createElement("li",{className:E.a.navItem},r.a.createElement("span",{className:"".concat(E.a.navItemTxt," ").concat(E.a.logo)},"MovieApp"),r.a.createElement(i.a,{color:"inherit","aria-label":"menu",className:E.a.navItemIcon},r.a.createElement(s.a,null))),U.map((function(e,t){return r.a.createElement(D,Object.assign({key:t},e,{setOpen:c,active:e.to===u}))})),r.a.createElement(D,{active:"/account"===u,setOpen:c,to:"/account",icon:_.a,text:(null===l||void 0===l?void 0:l.username)||"Login",username:null===l||void 0===l?void 0:l.username})))},H=n(211),B=n(97),X=n.n(B),q=n(212),J=n(74),z=n.n(J);var K=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current};var G=function(e,t){var n=Object(a.useRef)(e),r=Object(a.useState)((function(){return new URLSearchParams(Object(w.g)()).get(n.current)})),i=Object(o.a)(r,2),c=i[0],s=i[1],u=Object(w.d)(c),l=Object(a.useRef)(u);Object(a.useLayoutEffect)((function(){l.current=u}),[u]);var m=K(u)||null;Object(a.useEffect)((function(){m!==u&&t&&t(u,m)}),[u,t,m]),Object(a.useEffect)((function(){var e=function(e){var t=e.oldURL,a=e.newURL;if(t!==a){var r=Object(w.g)(t),o=Object(w.g)(a),i=new URLSearchParams(r).get(n.current),c=new URLSearchParams(o).get(n.current);i!==c&&s(c)}};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]);var d=Object(a.useCallback)((function(e,t){if(l.current!==e||t){var a=new URLSearchParams(Object(w.g)()),r="function"===typeof e?e(l.current):e;null===r?a.delete(n.current):a.set(n.current,String(r)),t&&(null===t[1]?a.delete(t[0]):a.set(t[0],String(t[1]))),window.location.hash=Object(w.f)()+"?"+a.toString()}}),[]);return[null!==u&&void 0!==u?u:void 0,d]},Q=k.a.buildFetchMovieSearchUrl,Z=function(e){var t=e.keyword,n=e.onSubmit,i=e.inputRef,c=Object(a.useState)([]),s=Object(o.a)(c,2),u=s[0],l=s[1],m=Object(a.useState)(null),d=Object(o.a)(m,2),v=d[0],f=d[1],p=Object(a.useState)(!1),h=Object(o.a)(p,2),g=h[0],_=h[1];Object(a.useEffect)((function(){var e=!0;return setTimeout((function(){return e&&_(!0)}),360),function(){e=!1}}),[]),Object(a.useEffect)((function(){var e=!0;return setTimeout((function(){e&&fetch(Q(t)).then((function(t){return e&&t.json()})).then((function(t){var n;e&&(l(null!==(n=t.results.slice(0,12))&&void 0!==n?n:[]),f(null))})).catch(console.log)}),300),function(){e=!1}}),[t]),Object(a.useEffect)((function(){var e=function(e){if(u.length)switch(e.code){case"ArrowUp":return f((function(e){var t=e?Math.abs(--e%u.length):u.length-1;return i.current.value=u[t].title,t}));case"ArrowDown":return f((function(e){var t=null!==e?Math.abs(++e%u.length):0;return i.current.value=u[t].title,t}))}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[i,u]);var b=function(e){i.current.value=e,n()};return g&&u.length?r.a.createElement("ul",{className:z.a.suggestionsDropdown,onMouseLeave:function(){return f(null)}},u.map((function(e,t){var n=e.id,a=e.title;return r.a.createElement("li",{key:n,"aria-selected":t===v,onMouseEnter:function(){return f(t)},onClick:b.bind(null,a)},a)}))):null},Y=r.a.memo((function(e){var t=e.className,n=Object(a.useRef)(!1),i=Object(a.useRef)(null),c=Object(a.useState)(""),s=Object(o.a)(c,2),u=s[0],l=s[1],m=G("s",(function(e){!e&&b("")})),d=Object(o.a)(m,2),v=d[0],f=void 0===v?"":v,p=d[1],h=Object(a.useState)(f),g=Object(o.a)(h,2),_=g[0],b=g[1],E=Object(a.useState)(""),O=Object(o.a)(E,2),w=O[0],j=O[1],y=Object(a.useState)(!1),S=Object(o.a)(y,2),I=S[0],k=S[1],M=Object(a.useCallback)((function(){return n.current&&k((function(){return setTimeout((function(){var e,t;null===(e=i.current)||void 0===e||e.focus(),null===(t=i.current)||void 0===t||t.select()}),200),!0}))}),[]),N=Object(a.useCallback)((function(){return n.current&&k((function(){var e;return null===(e=i.current)||void 0===e||e.blur(),l(""),!1}))}),[]);function C(e){var t;null===e||void 0===e||e.preventDefault();var n=(null===(t=i.current)||void 0===t?void 0:t.value)||"";if(!n)return l("Search can't be empty.");f!==n?(N(),u&&l(""),setTimeout((function(){return p(n,["page",1])}),150)):l("Search results already showing."),b(n),j("")}return Object(a.useEffect)((function(){n.current=!0;var e=function(e){switch(e.code){case"Slash":document.activeElement!==i.current&&setTimeout(M,50);break;case"Escape":N()}};return window.addEventListener("keydown",e),function(){n.current=!1,window.removeEventListener("keydown",e)}}),[N,M]),Object(a.useLayoutEffect)((function(){k(!f)}),[f]),r.a.createElement("div",{className:"".concat(z.a.root," ").concat(t||""),"is-focused":"".concat(I)},r.a.createElement("form",{autoComplete:"off",onSubmit:C},r.a.createElement(q.a,{className:z.a.bar,label:"Movie Search",error:!!u,helperText:u,onBlur:function(){f&&!w&&N()},inputRef:i,name:"searchTerm",value:_,onChange:function(e){var t=e.target;b(t.value),j(t.value)},onFocus:M,inputProps:{id:"movies-browser-bar-input",onClick:function(e){return e.preventDefault()},onKeyDown:function(e){return("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()}}})),!!w&&I&&r.a.createElement(Z,{keyword:w,onSubmit:C,inputRef:i}))})),$=n(215),ee=n(207),te=n(124),ne=n.n(te),ae=n(123),re=n.n(ae),oe=n(122),ie=n.n(oe),ce=Object(a.memo)((function(e){var t=e.className,n=e.totalPages,i=P(),c=G("page"),s=Object(o.a)(c,2),u=s[0],l=void 0===u?0:u,m=s[1],d=G("movieId"),v=Object(o.a)(d,1)[0],f=Object(a.useCallback)((function(){return m((function(e){return e&&e<n?(i&&Object(w.u)(),e+1):e||0}))}),[i,m,n]),p=Object(a.useCallback)((function(){return m((function(e){return e&&e>1?(i&&Object(w.u)(),e-1):e||0}))}),[i,m]);return Object(a.useEffect)((function(){var e=function(e){var t,a=e.code,r=e.altKey,o=e.ctrlKey,i=e.shiftKey;if(!(r||o||i)&&"movies-browser-bar-input"!==(null===(t=document.activeElement)||void 0===t?void 0:t.id)&&n)switch(a){case"ArrowRight":return f();case"ArrowLeft":return p()}};return v||window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[n,l,v,f,p]),n?r.a.createElement($.a,{className:"".concat(ie.a.root," ").concat(t||""),position:"static",variant:"text",steps:n,activeStep:l&&l-1,nextButton:r.a.createElement(ee.a,{size:"small",onClick:f,disabled:l>=n},"Next ",r.a.createElement(re.a,null)),backButton:r.a.createElement(ee.a,{size:"small",onClick:p,disabled:l<=1},r.a.createElement(ne.a,null)," Back")}):null})),se=n(67),ue=n(208),le=n(98),me=n.n(le),de=function(e){var t=e.className,n=e.darken,i=void 0!==n&&n,c=e.delay,s=void 0===c?0:c,u=e.fixed,l=void 0!==u&&u,m=Object(se.a)(e,["className","darken","delay","fixed"]),d=Object(a.useState)(0===s),v=Object(o.a)(d,2),f=v[0],p=v[1],h=P();return Object(a.useEffect)((function(){var e=!0;return f||setTimeout((function(){return e&&p(!0)}),s),function(){e=!1}}),[s,f]),r.a.createElement("div",Object.assign({className:"".concat(me.a.root," ").concat(t||""," ").concat(i?me.a.darken:"")},m,{style:{opacity:f?1:0,position:l?"fixed":"absolute"}}),r.a.createElement(ue.a,{size:"15"+(h?"vw":"vh")}))},ve=n(9),fe=n(125),pe=n.n(fe),he=n(93),ge=n(209),_e=k.a.searchPageTransitionConfig;var be=function(e){var t=e.page,n=e.children,a=K(t),o=!a||a<t,i=Object(he.b)(t,t,function(e){return{initial:{opacity:0,translateX:0},from:{opacity:-.2,translateX:8*(e?1:-1)},enter:{opacity:1,translateX:0},leave:{opacity:-.2,translateX:8*(e?-1:1)},config:_e,unique:!0}}(o));return r.a.createElement(r.a.Fragment,null,i.map((function(e){var t=e.key,a=e.props,o=e.item;return o?r.a.createElement(ge.a.div,{key:t,className:"".concat(pe.a.root," transition-page"),style:Object(ve.a)({},a,{transform:a.translateX.interpolate((function(e){return e?"translateX(".concat(e,"%)"):""}))})},n(o)):null})))},Ee=n(100),Oe=n.n(Ee),we=function(e){var t=e.className,n=e.error;return r.a.createElement("div",{className:"".concat(t||""," ").concat(Oe.a.root)},r.a.createElement("div",{className:Oe.a.title},"- Search error -"),n.errors.map((function(e,t){return r.a.createElement("div",{key:t},'"',e,'"')})))},je=n(127),ye=n.n(je),Se=function(e){var t=e.totalResults;return r.a.createElement("div",{className:ye.a.root},"Found: ",Object(w.e)(t),1e4===t&&"+")},Ie=n(101),ke=n.n(Ie);function Me(e){var t=e.newURL.split("#")[1].split("?"),n=Object(o.a)(t,2),a=n[0],r=n[1],i=void 0===r?"":r;sessionStorage.setItem(a,i)}var Ne=function(){Object(a.useLayoutEffect)((function(){var e=Object(w.f)(),t=sessionStorage.getItem(e);return t&&!Object(w.g)()&&(window.location.hash=e+"?"+t),window.addEventListener("hashchange",Me),function(){return window.removeEventListener("hashchange",Me)}}),[])},Ce=n(210),Te=n(128),Re=n.n(Te),Le=n(36);function xe(e){var t=Object(a.useRef)(e),n=Object(a.useState)(),r=Object(o.a)(n,2),i=r[0],c=r[1];return Object(a.useLayoutEffect)((function(){var e=Object(w.h)(t.current);function n(e){var a=e.detail,r=a.movieId,o=a.imgData;r===t.current&&(c(o),window.removeEventListener("imageData",n))}return e?c(e):window.addEventListener("imageData",n),function(){return window.removeEventListener("imageData",n)}}),[]),i}var Fe=n(129),Pe=n.n(Fe);var Ae=function(e,t,n){var r=Object(a.useRef)(e),i=Object(a.useRef)(n),c=Object(a.useState)([t,"initial"]),s=Object(o.a)(c,2),u=s[0],l=s[1];return Object(a.useEffect)((function(){r.current=e}),[e]),Object(a.useEffect)((function(){i.current=n}),[n]),Object(a.useEffect)((function(){var e=!0;function t(t){var n=t.detail,a=n.state;if(n.movieId===r.current){var o="on".concat(Pe()(a));if(o in i.current){var c=i.current[o],s="function"===typeof c?c():c;e&&l([s,a])}}}return window.addEventListener("movieView",t),function(){e=!1,window.removeEventListener("movieView",t)}}),[]),u},Ve=function(e){var t=e.className,n=e.movieId,i=e.itemView,c=void 0!==i&&i,s=P(),u=Object(a.useState)(c),l=Object(o.a)(u,2),m=l[0],d=l[1],v=m?.4:0;Object(a.useEffect)((function(){var e=!0;return c||setTimeout((function(){e&&d(!0)}),450),function(){e=!1}}),[c]);var f=Ae(n,v,Object(ve.a)({},c?{onEnter:0,onClose:v}:{})),p=Object(o.a)(f,2),h=p[0],g=p[1],_=Object(he.a)({opacity:c?h:v,config:{duration:"close"===g?450:2100,easing:"close"===g?void 0:Le.a}}),b="",E=xe(n);return(null===E||void 0===E?void 0:E.jpgData)&&!s&&(b=E.jpgData),r.a.createElement(ge.a.img,{src:b,className:"".concat(Re.a.root," ").concat(t||""),alt:"",crossOrigin:"anonymous","item-view":String(c),style:Object(ve.a)({imageRendering:"pixelated",display:E?"block":"none",backgroundColor:null===E||void 0===E?void 0:E.averageColor},_)})};Ve.defaultProps={itemView:!1};var Ue=r.a.memo(Ve),De=n(102),We=n.n(De),He=52*Math.PI,Be=[1,81,40],Xe=[117,88,67],qe=function(e){var t=e.score,n=e.itemView,i=void 0!==n&&n,c=e.className,s=Object(se.a)(e,["score","itemView","className"]),u=Object(a.useRef)(null),l=t/10,m=P(),d=Object(w.o)(Be,Xe,l),v=He-He*l,f=Object(he.a)((function(){return{stroke:Object(w.p)(i?d:Be),strokeDashoffset:i?v:He,config:{duration:3e3*l,easing:Le.b}}})),p=Object(o.a)(f,2),h=p[0],g=p[1];Object(a.useEffect)((function(){var e=!1;return setTimeout((function(){e||i||(u.current.style.visibility="visible",u.current.style.opacity="1",g({stroke:Object(w.p)(d),strokeDashoffset:v}))}),400),function(){e=!0}}),[]);var _={visibility:i?void 0:"hidden",opacity:i?1:0};return r.a.createElement("div",Object.assign({className:"".concat(We.a.root," ").concat(c||"")},s,{style:_,ref:u}),r.a.createElement("svg",{height:"100%",width:60,viewBox:"0 0 ".concat(60," ").concat(60),overflow:"visible"},r.a.createElement("circle",{cx:30,cy:30,r:26,fill:"rgba(0, 0, 0, .25)",stroke:"#5d5d5d",strokeWidth:4,style:{zIndex:-1}}),r.a.createElement(ge.a.circle,{style:m?void 0:h,cx:30,cy:30,r:26,stroke:Object(w.p)(d),fill:"none",strokeDasharray:He,strokeLinecap:"round",strokeDashoffset:v.toString(),strokeWidth:4,strokeMiterlimit:6,transform:"rotate(-90 ".concat(30," ").concat(30,")")})),r.a.createElement("span",{className:We.a.scoreValue},t?t.toPrecision(2):"NR"))},Je=n(25),ze=n.n(Je),Ke=n(217),Ge=n(132),Qe=n.n(Ge),Ze=n(216);var Ye=function(e){var t=Object(a.useRef)(e);Object(a.useLayoutEffect)((function(){var e=document.scrollingElement?window.getComputedStyle(document.scrollingElement).overflow:"";return("undefined"===typeof t.current||window.innerWidth<=t.current)&&document.scrollingElement&&(document.scrollingElement.style.overflow="hidden"),function(){document.scrollingElement&&(document.scrollingElement.style.overflow=e)}}),[])},$e={0:0,1:.5,2:1,3:1.5,4:2,5:2.5,6:3,7:3.5,8:4,9:4.5,10:5},et=function(e){var t=e.rateItem,n=e.defaultValue,i=void 0===n?0:n,c=e.setRatingModal,s=P(),u=Object(a.useState)(i/2),l=Object(o.a)(u,2),m=l[0],d=l[1];Ye(600);function v(e){var t=e.currentTarget.getBoundingClientRect(),n=t.left,a=t.right-n,r=e.targetTouches[0].clientX-n,o=Math.round(r/a*100),i=o>0?o<=100?o:100:0,c=$e[Math.round(i/10)];d(c)}return r.a.createElement("div",{className:ze.a.ratingModalContainer,onClick:function(e){e.clientY/window.innerHeight<.55&&c(!1)}},r.a.createElement("div",{className:ze.a.ratingModal},!!i&&r.a.createElement("button",{onClick:function(){s?d(null):t(null)},title:"remove rating",className:ze.a.removeButton},"-"),r.a.createElement(Ze.a,{name:"movie-rating",precision:.5,value:m,onChange:function(e,n){s||t(2*(n||0))},onTouchMove:v,onTouchStart:v,size:s?"large":"medium"}),s&&r.a.createElement("button",{disabled:i/2===m,className:ze.a.mobileSubmit,onClick:function(){t(m?2*m:m)}},null===m?"Un-Rate":"Rate")))},tt=n(77),nt=n.n(tt),at=k.a.newRequestTokenUrl;var rt=function(e){var t=e.children,n=Object(a.useState)(null),i=Object(o.a)(n,2),c=i[0],s=i[1],u=F(),l=u.isAuth,m=u.user,d=u.signOut,v=u.signIn;Object(a.useEffect)((function(){var e=!1,t=function(){var e=localStorage.getItem("token_data");if(e){var t=JSON.parse(e);return Object(w.r)(t)?t.request_token:null}return null}();return t?s(t):Object(w.k)(at).then((function(t){localStorage.setItem("token_data",JSON.stringify(t)),!e&&s(t.request_token)})),function(){e=!0}}),[]);return r.a.createElement("div",{className:nt.a.root},l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:nt.a.userField},r.a.createElement("span",null,"Username:"),r.a.createElement("span",null,m.username)),r.a.createElement("div",{className:nt.a.userField},r.a.createElement("span",null,"Name:"),r.a.createElement("span",null,m.name||"-- "))):r.a.createElement("div",{className:nt.a.userField},r.a.createElement("p",null,"No user logged in")),l?r.a.createElement("button",{onClick:d},"Log out"):r.a.createElement("button",{disabled:!c,onClick:function(){c&&v(c)}},"Log in"),t)},ot=k.a.buildFetchMovieViewUrl,it=k.a.itemActions;function ct(e,t){switch(t.type){case"set-account-state":return Object(ve.a)({},t.payload,{isLoading:[]});case"update-favorite":return Object(ve.a)({},e,{favorite:t.payload,isLoading:e.isLoading.filter((function(e){return"favorite"!==e}))});case"update-watchlist":return Object(ve.a)({},e,{watchlist:t.payload,isLoading:e.isLoading.filter((function(e){return"watchlist"!==e}))});case"update-rated":return Object(ve.a)({},e,{rated:t.payload,isLoading:e.isLoading.filter((function(e){return"rated"!==e}))});case"set-is-loading":return Object(ve.a)({},e,{isLoading:Object(y.a)(new Set([].concat(Object(y.a)(e.isLoading),Object(y.a)(t.payload))))});case"clear-loading":return Object(ve.a)({},e,{isLoading:[]});default:return e}}var st={rated:!1,watchlist:!1,favorite:!1,isLoading:[],id:0},ut=Object(A.b)("favorite"),lt=Object(A.b)("watchlist");function mt(e,t){return!!e||window.confirm("Remove item from ".concat("favorite"===t?"favorites":t,"?"))}var dt=function(e){var t=e.item,n=e.className,i=t.id,c=Object(a.useRef)(!1);Object(a.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]);var s=Object(a.useState)(!1),u=Object(o.a)(s,2),l=u[0],m=u[1],d=Object(a.useState)(!1),v=Object(o.a)(d,2),p=v[0],g=v[1],_=Object(a.useReducer)(ct,st),b=Object(o.a)(_,2),E=b[0],O=b[1],j=function(e){return O({type:"set-is-loading",payload:[e]})},y=F(),I="object"===typeof E.rated?E.rated.value:void 0,k=!y.isAuth||!E.id;Object(a.useEffect)((function(){var e=!1;return y.isAuth&&!E.id&&(O({type:"set-is-loading",payload:["id"]}),Object(w.k)("".concat(ot(i,"/account_states"),"&session_id=").concat(localStorage.getItem("session_id"))).then((function(t){!e&&O({type:"set-account-state",payload:t})}))),function(){e=!0}}),[E.id,y.isAuth,i]);return r.a.createElement("ul",{className:"".concat(ze.a.root," ").concat(n||"")},r.a.createElement(Ke.a,{key:"favorite",title:(E.favorite?"Remove from":"Mark as")+" Favorite",enterDelay:300,PopperProps:{className:ze.a.toolTip}},r.a.createElement("div",{className:ze.a.iconWrapper,"active-icon":String(E.favorite),"action-name":"favorite","is-loading":String(E.isLoading.includes("favorite")),onClick:function(){if(k)return!y.isAuth&&g(!0);var e=!E.favorite;mt(e,"favorite")&&(j("favorite"),it.favorite(e,i).then((function(){e?S.a.dispatch(ut.unshiftToFavorites(t)):S.a.dispatch(ut.removeFromListItems(i)),c.current&&O({type:"update-favorite",payload:e})})).catch((function(e){console.error(e),alert("Error: could not mark to item-list :("),c.current&&O({type:"clear-loading"})})))}},r.a.createElement(f.a,{className:ze.a.icon}))),r.a.createElement(Ke.a,{key:"watchlist",title:(E.watchlist?"Remove from":"Add to")+" Watchlist",enterDelay:300,PopperProps:{className:ze.a.toolTip}},r.a.createElement("div",{className:ze.a.iconWrapper,"active-icon":String(E.watchlist),"action-name":"watchlist","is-loading":String(E.isLoading.includes("watchlist")),onClick:function(){if(k)return!y.isAuth&&g(!0);var e=!E.watchlist;mt(e,"watchlist")&&(j("watchlist"),it.watchlist(e,i).then((function(){e?S.a.dispatch(lt.unshiftToFavorites(t)):S.a.dispatch(lt.removeFromListItems(i)),c.current&&O({type:"update-watchlist",payload:e})})).catch((function(e){console.error(e),alert("Error: could not update watchlist :("),c.current&&O({type:"clear-loading"})})))}},r.a.createElement(h.a,{className:ze.a.icon}))),r.a.createElement(Ke.a,{key:"rated",title:"Rate it!",enterDelay:300,PopperProps:{className:ze.a.toolTip}},r.a.createElement("div",Object.assign({className:ze.a.iconWrapper,"active-icon":String(!!E.rated),"action-name":"rated","is-loading":String(E.isLoading.includes("rated")),onClick:function(){if(!y.isAuth)return g(!0);m((function(e){return!e}))}},E.rated?{"icon-score":E.rated.value}:{}),r.a.createElement(Qe.a,{className:ze.a.icon}))),l&&r.a.createElement(et,{setRatingModal:m,rateItem:function(e){return k||"object"===typeof E.rated&&e===E.rated.value||null===e&&!1===E.rated?m(!1):(j("rated"),m(!1),void(e?it.rate(e,i).then((function(){c.current&&O({type:"update-rated",payload:{value:e}})})).catch((function(e){console.error(e),alert("Error: could not update rating :("),c.current&&O({type:"clear-loading"})})):it.unRate(i).then((function(){c.current&&O({type:"update-rated",payload:!1})})).catch((function(e){console.error(e),alert("Error: could not update rating :("),c.current&&O({type:"clear-loading"})}))))},defaultValue:I}),p&&r.a.createElement("div",{className:ze.a.showAuth,onClick:function(e){e.target===e.currentTarget&&g(!1)}},r.a.createElement(rt,null,r.a.createElement("button",{className:ze.a.xButton,onClick:function(){return g(!1)}},"\u2715"))))},vt=n(42),ft=n.n(vt),pt=n(32),ht=n(133),gt=n.n(ht),_t=n(90),bt=n.n(_t),Et=function(e){var t=e.movie,n=e.backGroundUrl,a=e.poster_path,o=e.itemView,i=void 0!==o&&o,c=e.className;return r.a.createElement("div",{className:"".concat(bt.a.root," ").concat(c||""),"item-view":String(i)},r.a.createElement("div",{style:{backgroundImage:n},onClick:function(){return!i&&S.a.dispatch(Object(pt.b)(t))},className:bt.a.image},!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(gt.a,{className:bt.a.imageIcon}),r.a.createElement("span",null,"No",r.a.createElement("br",null),"Image"))))},Ot=k.a.getPosterSrcPathPrefix,wt={onEnter:"hidden",onLeave:"visible"},jt=function(e){var t=e.movie,n=e.className,i=e.itemView,c=void 0!==i&&i,s=P(),u=Object(a.useRef)(null),l=t.poster_path,m=t.title,d=t.vote_average,v=t.release_date,f=t.overview,p=Object(a.useState)((function(){return"".concat(Ot()).concat(l)})),h=Object(o.a)(p,2),g=h[0],_=h[1],b={opacity:0,visibility:"hidden"},E=Ae(t.id,b,Object(ve.a)({},c?{onEnter:b,onView:{opacity:1,transition:"opacity 650ms ease"},onClose:{opacity:0,transition:"opacity 450ms ease"}}:{})),O=Object(o.a)(E,2),w=O[0],j=O[1],y={fontSize:("view"===j||"enter"===j||s)&&c?s?"1.4rem":"1.9rem":void 0},S=Ae(t.id,"visible",c?{onView:function(){if(c&&l){var e="".concat(Ot("500")).concat(l),t=new Image;t.onload=function(){return _(e)},t.src=e}return"visible"}}:wt),I=Object(o.a)(S,2),k=I[0],M=I[1];Object(a.useEffect)((function(){"leave"===M?(u.current.offsetWidth,u.current.classList.add(ft.a.runAnimation)):u.current.classList.remove(ft.a.runAnimation)}),[M]);var N=Object(a.useMemo)((function(){return r.a.createElement(Et,{backGroundUrl:l?'url("'.concat(g,'")'):"",poster_path:l,movie:t,itemView:c})}),[g,l]);return r.a.createElement("div",{className:"".concat(ft.a.root," ").concat(n||""),"item-view":String(c),id:c?"":String(t.id),ref:u,style:{visibility:k}},!(s&&c)&&r.a.createElement(Ue,{movieId:t.id,itemView:c}),N,r.a.createElement("div",{className:ft.a.content},r.a.createElement("div",{className:ft.a.wrapper},r.a.createElement("div",{className:ft.a.header},r.a.createElement("div",{className:ft.a.title,style:y},m),v&&r.a.createElement("div",{className:ft.a.year},v.substr(0,4)),c&&!s&&r.a.createElement("p",{className:ft.a.overViewSection,style:w},f)),!(s&&c)&&r.a.createElement("div",{className:ft.a.info},r.a.createElement("div",null,r.a.createElement(qe,{score:d,itemView:c})),c&&r.a.createElement("div",{style:w},r.a.createElement(dt,{item:t}))))))},yt=n(43),St=n.n(yt),It=function(){return r.a.createElement("div",{className:"".concat(St.a.root)},r.a.createElement("div",{className:St.a.imageWrapper},r.a.createElement("div",{className:St.a.image})),r.a.createElement("div",{className:St.a.content},r.a.createElement("div",{className:St.a.wrapper},r.a.createElement("div",{className:St.a.header},r.a.createElement("div",{className:St.a.title}),r.a.createElement("div",{className:St.a.year})),r.a.createElement("div",{className:St.a.info},r.a.createElement("div",{className:St.a.infoWrapper},r.a.createElement("svg",{height:"100%",width:60,viewBox:"0 0 ".concat(60," ").concat(60),overflow:"visible"},r.a.createElement("circle",{cx:30,cy:30,r:26,fill:"rgba(0, 0, 0, .25)",stroke:"#5d5d5d",strokeWidth:4,style:{zIndex:-1}})))))))},kt=n(134),Mt=n.n(kt),Nt=k.a.itemsPerPageUI;function Ct(e){return"title"in e}var Tt=function(e,t){var n,a;return e.isFetching===t.isFetching&&e.isFetchingMore===t.isFetchingMore&&Object.keys((null===(n=e.searchData)||void 0===n?void 0:n.results)||{}).length===Object.keys((null===(a=t.searchData)||void 0===a?void 0:a.results)||{}).length};function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[];if(e.isFetching||!e.searchData)return n;for(var a=(t-1)*Nt,r=0;r<Nt;r++){var o=a+r,i=e.searchData.results[o];if(n[r]=i||{id:o},o+1===e.searchData.total_results)break}return n}var Lt=function(e){var t,n,r,i=Object(a.useState)((function(){return Object(A.b)(e.name)})),c=Object(o.a)(i,1)[0],s=Object(a.useRef)(c),u=Object(a.useRef)(e.name),l=Object(I.b)((function(t){return t[e.name]}),Tt),m=G("page",(function(e){e&&S.a.dispatch(s.current.checkIfFetchMore(e))})),d=Object(o.a)(m,2),v=d[0],f=void 0===v?1:v,p=d[1];return Object(a.useEffect)((function(){"search"!==u.current&&(S.a.getState()[u.current].searchData||S.a.dispatch(s.current.fetchMoviesAsync()))}),[]),Object(a.useEffect)((function(){var t=setTimeout((function(){"search"===u.current&&l.searchTerm!==e.searchQuery&&e.searchQuery&&!l.isFetching&&S.a.dispatch(s.current.fetchMoviesAsync(e.searchQuery,Object(w.a)(f)))}),150);return function(){return clearTimeout(t)}}),[f,e.searchQuery,l]),{items:Rt(l,f),error:l.searchError,pageUI:f,isLoading:l.isFetching,totalPagesUI:(r=(null===(t=l.searchData)||void 0===t?void 0:t.total_results)||0,Math.ceil(r/Nt)),totalResults:(null===(n=l.searchData)||void 0===n?void 0:n.total_results)||0,goToPage:"trendingWeek"!==u.current?function(e){return p(e)}:void 0}},xt=function(e){var t=e.items;return r.a.createElement(Ce.a,{container:!0,alignItems:"stretch",spacing:2,className:Mt.a.root},t.map((function(e){return r.a.createElement(Ce.a,{key:e.id,item:!0,xs:12,sm:6,md:4},Ct(e)?r.a.createElement(jt,{movie:e}):r.a.createElement(It,null))})))},Ft=function(){Ne();var e=G("s"),t=Object(o.a)(e,1)[0],n=Lt({name:"search",searchQuery:void 0===t?"":t}),i=n.items,c=n.isLoading,s=n.pageUI,u=n.totalPagesUI,l=n.totalResults,m=n.goToPage,d=n.error;return Object(a.useEffect)((function(){s>u&&u&&m(u)}),[m,s,u]),console.log("items",i),r.a.createElement("div",{className:ke.a.root},r.a.createElement("div",{className:ke.a.searchHead},r.a.createElement(Y,null),!!l&&r.a.createElement(Se,{totalResults:l}),r.a.createElement(ce,{totalPages:u})),c?r.a.createElement(de,{delay:800,fixed:!0}):d?r.a.createElement(we,{error:d}):r.a.createElement(be,{page:s},(function(){return r.a.createElement(xt,{items:i})})))},Pt=n(52),At=n(24),Vt=n.n(At),Ut=k.a.getPosterSrcPathPrefix,Dt=function(e){var t=e.item,n=e.backgroundImage,a=e.onClickHandler,o=e.gridArea;return r.a.createElement("div",{"movie-title":t.title,className:"".concat(Vt.a.gridItem," ").concat(Vt.a.hoveredBg),style:{gridArea:o},key:t.id,onClick:a},r.a.createElement("div",{style:{backgroundImage:n}}))},Wt=function(){var e=Lt({name:"trendingWeek"}),t=e.items.filter((function(e,t){return t<3}));return r.a.createElement("div",{className:Vt.a.gridContainer},t.map((function(e,t){return r.a.createElement(Dt,{key:e.id,item:e,backgroundImage:"url(".concat(Ut(2===t?"500":"400")).concat(e.backdrop_path,")"),gridArea:"item".concat(t+1),onClickHandler:function(){return S.a.dispatch(Object(pt.b)(e))}})})),e.isLoading&&r.a.createElement(de,{darken:!0,delay:500}))},Ht=n(60),Bt=n.n(Ht),Xt=k.a.getPosterSrcPathPrefix,qt=Object(a.memo)((function(e){var t=e.isLoading,n=void 0!==t&&t,a=e.movie,o=e.canClick,i=void 0===o?function(){return!1}:o,c=e.itemClassName,s=a&&a.poster_path&&"url(".concat(Xt("300")).concat(a.poster_path,")");return r.a.createElement("div",{className:"".concat(Bt.a.relatedMovieItemWrapper," ").concat(c||""),onDragStart:zt},r.a.createElement("div",{className:"\n\t\t\t\t\t\t".concat(Bt.a.relatedMovieItem,"\n\t\t\t\t\t\t").concat(n?Bt.a.isLoadingItem:"","\n\t\t\t\t\t\t").concat(s||n?"":Bt.a.noPoster,"\n\t\t\t\t\t"),title:null===a||void 0===a?void 0:a.title,style:{backgroundImage:s||void 0},onDragStart:zt,onClick:a?function(){return i()&&a&&S.a.dispatch(Object(pt.b)(a))}:void 0},!s&&a?a.title:null))}),(function(e,t){return e.isLoading===t.isLoading}));function Jt(e,t){e.current=t.clientX}function zt(e){e.preventDefault()}var Kt=function(e){var t=e.isLoading,n=void 0!==t&&t,i=e.noResultsFound,c=e.items,s=void 0===c?[]:c,u=e.className,l=e.scrollByX,m=void 0===l?200:l,d=e.infoTabMessage,v=e.itemClassName,f=Object(a.useRef)(null),p=Object(a.useState)(0),h=Object(o.a)(p,2),g=h[0],_=h[1],b=Object(he.a)((function(){return{to:{scrollXPos:g},onFrame:function(e){var t=e.scrollXPos;f.current.scroll(t,0)}}})),E=Object(o.a)(b,2)[1];Object(a.useEffect)((function(){E({scrollXPos:g})}),[g,E]);var O=Object(a.useCallback)((function(e){var t=e.currentTarget,n=t.scrollWidth-t.clientWidth,a=e.movementX;1===e.buttons&&_((function(e){var t=e-1.5*a;return t>0&&t<=n?t:t>n?n:0}))}),[]),w=Object(a.useCallback)((function(e){var t=e.currentTarget,n=t.scrollWidth-t.clientWidth;e.deltaY<0?_((function(e){return e>0?e-m:0})):_((function(e){var t=e+m;return t<n?t:n}))}),[m]),j=Object(a.useRef)(0),S=Object(a.useRef)(0),I=function(){return j.current===S.current},k=Object(a.useMemo)((function(){return s.map((function(e){return r.a.createElement(qt,{key:e.id,movie:e,canClick:I,itemClassName:v})}))}),[s.length,v]);return r.a.createElement("div",Object.assign({className:"".concat(Bt.a.root," ").concat(u||""),onWheel:i?void 0:w,onMouseMove:i?void 0:O,ref:f,onMouseDown:Jt.bind(null,j),onMouseUp:Jt.bind(null,S),style:{overflowX:n||i?"hidden":"scroll",opacity:i?.5:1}},d?{"info-tab":d}:{}),i?r.a.createElement(r.a.Fragment,null,Object(y.a)(new Array(5)).map((function(e,t){return r.a.createElement(qt,{isLoading:!1,movie:null,key:t})})),r.a.createElement("div",{className:Bt.a.noMoviesFound},"No related movies found")):r.a.createElement(r.a.Fragment,null,k),n&&Object(y.a)(new Array(5)).map((function(e,t){return r.a.createElement(qt,{isLoading:!0,movie:null,key:t})})))},Gt=k.a.getPosterSrcPathPrefix,Qt=function(){var e=Lt({name:"nowPlaying"}),t=e.items,n=t.length?t[0]:null;return r.a.createElement("div",{className:Vt.a.nowPlayingContainer},!e.isLoading&&t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(Vt.a.mainMovieItem," ").concat(Vt.a.hoveredBg),"movie-title":n.title,onClick:function(){return S.a.dispatch(Object(pt.b)(n))}},r.a.createElement("div",{style:{backgroundImage:"url(".concat(Gt("500")).concat(n.backdrop_path,")")}})),r.a.createElement("div",{className:Vt.a.subMovieItemContainerWrapper},r.a.createElement(Kt,{noResultsFound:!1,items:t,className:Vt.a.subMovieItemContainer,itemClassName:Vt.a.subMovieItemContainerItem,scrollByX:175})))||e.isLoading&&r.a.createElement(de,{darken:!0,delay:500}))},Zt=function(e){var t=e.title,n=e.children;return r.a.createElement("div",{className:Vt.a.sectionSpotlight},r.a.createElement("h2",{className:Vt.a.sectionTitle},t),r.a.createElement("div",{className:Vt.a.sectionContentWrapper},r.a.createElement("div",{className:Vt.a.sectionContent},n)))},Yt=Object(a.memo)((function(){return r.a.createElement("div",{className:Vt.a.root},r.a.createElement("h1",null,"Movie Ratings App"),r.a.createElement("div",{className:Vt.a.content},r.a.createElement(Zt,{title:"Trending This Week"},r.a.createElement(Wt,null)),r.a.createElement(Zt,{title:"Now Playing"},r.a.createElement(Qt,null))))}),(function(){return!0})),$t=n(103),en=n.n($t),tn=n(61),nn=n.n(tn),an=n(48),rn=n.n(an),on=n(20),cn=function(e){var t=e.movieView,n=t.budget,a=t.homepage,o=t.release_date,i=t.revenue,c=t.runtime,s=t.status,u=a?new URL(a).hostname:null,l=r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{key:1,className:rn.a.title},"Facts"),s?r.a.createElement("div",{key:2,className:rn.a.sideInfoItem},r.a.createElement("h4",null,"Status"),r.a.createElement("div",null,s)):null,o?r.a.createElement("div",{key:3,className:rn.a.sideInfoItem},r.a.createElement("h4",null,"Release Date"),r.a.createElement("div",null,Object(w.i)(o))):null,n?r.a.createElement("div",{key:4,className:rn.a.sideInfoItem},r.a.createElement("h4",null,"Budget"),r.a.createElement("div",null,"$"+Object(w.e)(n))):null,i?r.a.createElement("div",{key:5,className:rn.a.sideInfoItem},r.a.createElement("h4",null,"Revenue"),r.a.createElement("div",null,"$"+Object(w.e)(i))):null,a?r.a.createElement("div",{key:6,className:rn.a.sideInfoItem},r.a.createElement("h4",null,"Homepage"),r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},u)):null,c?r.a.createElement("div",{key:7,className:rn.a.sideInfoItem},r.a.createElement("h4",null,"Runtime"),r.a.createElement("div",null,Object(w.s)(c))):null),m=Object(he.b)(l.props.children,(function(e){return null===e||void 0===e?void 0:e.key}),{initial:{transform:"translateX(300px)",opacity:-1},enter:{transform:"translateX(0px)",opacity:1},config:{duration:1300,easing:Le.c},trail:105});return r.a.createElement(r.a.Fragment,null,m.map((function(e){var t=e.props,n=e.key,a=e.item;if(!a)return null;var o=ge.a[a.type];return r.a.createElement(o,Object.assign({key:n},a.props,{style:t}))})))},sn=function(e){var t=e.movieView,n=e.movieId,a=P(),i=Ae(n,a?0:105,a?{}:{onView:0,onClose:0}),c=Object(o.a)(i,2),s=c[0],u="close"===c[1]?0:1,l=Object(he.a)({left:s,config:{duration:900,easing:Le.c}}),m=Object(w.h)(n),d=m?Object(on.b)(m.averageColor,.2):"rgba(160, 160, 160, .2)";return r.a.createElement(ge.a.div,{className:rn.a.root,style:{left:l.left.to((function(e){return e+"%"})),backgroundColor:d,opacity:u}},t&&r.a.createElement(cn,{movieView:t}))},un=n(135),ln=n.n(un),mn="rgba(160, 160, 160, ".concat(.6,")"),dn=r.a.memo((function(e){var t=e.movieId,n=xe(t),a=Ae(t,{opacity:0},{onView:{opacity:1,transitionDuration:"800"},onClose:{opacity:0,transitionDuration:"450"}}),i=Object(o.a)(a,1)[0],c=mn;n&&(c=Object(on.b)(n.averageColor,.6));var s={background:"linear-gradient(180deg, transparent 0%, ".concat(c," 100%)")};return r.a.createElement("div",{style:Object(ve.a)({},s,{},i),className:ln.a.root})}),(function(){return!0})),vn=n(136),fn=n.n(vn),pn=k.a.buildFetchMovieViewUrl,hn=function(e){var t=e.movieId,n=e.className,i=Object(a.useState)(null),c=Object(o.a)(i,2),s=c[0],u=c[1];Object(a.useEffect)((function(){var e=!1;return Object(w.k)(pn(t,"/similar")).then((function(t){!e&&u(t.results)})),function(){e=!0}}),[t]);var l=!!s&&!s.length;return r.a.createElement(Kt,{className:"".concat(fn.a.root," ").concat(n||""),isLoading:!s,noResultsFound:l,items:null!==s&&void 0!==s?s:void 0,infoTabMessage:"Related Movies \u27a5",scrollByX:200})},gn=Object(a.memo)((function(e){var t=e.movieItem,n=Object(a.useRef)(t),i=P(),c=Object(w.q)(t),s=Object(a.useState)((function(){return c?t:null})),u=Object(o.a)(s,2),l=u[0],m=u[1];Object(a.useEffect)((function(){var e=!1;return Object(w.b)()&&Object(w.u)(),Object(w.q)(n.current)||Object(w.l)(n.current).then((function(t){return!e&&m(t)})),function(){e=!0}}),[]);var d=Ae(t.id,!1,i?{}:{onView:!0,onClose:!1}),v=Object(o.a)(d,2)[1],f=i||"view"===v;return r.a.createElement("div",{className:nn.a.root,id:"movie-item-view"},r.a.createElement(dn,{movieId:t.id}),r.a.createElement("div",{className:nn.a.mainInfo},r.a.createElement(jt,{movie:t,itemView:!0,className:nn.a.movieItem}),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:nn.a.mobileRateActions},r.a.createElement(qe,{score:t.vote_average,itemView:!0}),r.a.createElement(dt,{item:t})),r.a.createElement("p",{className:nn.a.mobileOverview},t.overview)),f?r.a.createElement(hn,{movieId:t.id}):null),r.a.createElement("div",{className:nn.a.sideInfo},l&&r.a.createElement(sn,{movieView:l,movieId:t.id})))}),(function(e,t){return e.movieItem.id===t.movieItem.id})),_n=n(22),bn=n(35),En=n(34),On=n(89),wn=function(e){Object(En.a)(n,e);var t=Object(bn.a)(n);function n(e,a){return Object(_n.a)(this,n),t.call(this,"movieView",{detail:{movieId:e,state:a}})}return n}(Object(On.a)(CustomEvent)),jn={movieViewItem:null,isLoading:!1},yn=function(e,t){switch(t.type){case"clear-item":return jn;case"set-is-loading":return Object(ve.a)({},e,{isLoading:!0});case"set-movie-item":return{isLoading:!1,movieViewItem:t.payload}}},Sn=function(e){return{type:"set-movie-item",payload:e}};function In(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)}var kn=function(){var e,t=G("movieId"),n=Object(o.a)(t,2),r=n[0],i=void 0===r?0:r,c=n[1],s=Object(a.useReducer)(yn,jn),u=Object(o.a)(s,2),l=u[0],m=u[1],d=l.movieViewItem,v=l.isLoading,f=function(){return c(null)},p=Object(a.useCallback)((function(e){var t,n;if(!i)return null;var a=null===(t=e.search.searchData)||void 0===t?void 0:t.results;if(a)for(var r in a){var o;if((null===(o=a[r])||void 0===o?void 0:o.id)===i)return a[r]}return(null===(n=e.movieItem.item)||void 0===n?void 0:n.id)==i?e.movieItem.item:null}),[i]),h=Object(I.b)(p,In),g=null!==(e=null===h||void 0===h?void 0:h.id)&&void 0!==e?e:0;Object(a.useEffect)((function(){v||(g===i&&(null===d||void 0===d?void 0:d.id)!==i?m(Sn(h)):(!d||d&&d.id!=i)&&i?(m({type:"set-is-loading"}),Object(w.l)(null!==h&&void 0!==h?h:i).then((function(e){m(Sn(e))}))):i||null===d||m({type:"clear-item"}))}),[i,g,v,d,h]);var _=Object(a.useState)({movieViewItem:d,isLoading:v,clearMovieId:f}),b=Object(o.a)(_,2),E=b[0],O=b[1];return Object(a.useEffect)((function(){O({movieViewItem:d,isLoading:v,clearMovieId:f})}),[l]),E},Mn=r.a.memo((function(e){var t=e.children,n=e.movieViewItem,a=e.clearMovieId,i=Ae((null===n||void 0===n?void 0:n.id)||0,"",{onEnter:"rgba(0, 0, 0, 0.5)",onClose:void 0}),c=Object(o.a)(i,1)[0];return r.a.createElement("div",{className:en.a.root,onClick:function(e){var t=e.target;t===e.currentTarget&&(t.style.backgroundColor="rgba(0, 0, 0, 0)",a())},style:{backgroundColor:c}},t)}),(function(){return!0}));var Nn=r.a.memo((function(){var e=P(),t=kn(),n=t.movieViewItem,a=t.isLoading,o=t.clearMovieId,i=function(e,t){var n;if(!e)return{};var a=document.getElementById("main-container"),r=null===(n=document.getElementById(String(e.id)))||void 0===n?void 0:n.getBoundingClientRect();if(e){var o,i=a.firstElementChild.getBoundingClientRect();return{from:o=r?{top:r.top,left:r.left,bottom:window.innerHeight-r.bottom,width:r.width}:{top:window.innerHeight,left:i.left,bottom:-10,width:i.width,opacity:0},enter:{top:.1*window.innerHeight,left:i.x,bottom:-10,width:i.width,opacity:1},leave:Object(ve.a)({},o,{config:{mass:12,tension:170,friction:24,clamp:!0}}),config:t?{duration:0}:{mass:11,tension:350,friction:97,precision:.8,clamp:!0},onStart:t?void 0:function(e,t){e&&("enter"===t?setTimeout((function(){dispatchEvent(new wn(e.id,"enter"))}),50):"leave"===t&&dispatchEvent(new wn(e.id,"close")))},onRest:t?void 0:function(e,t){e&&("leave"===t?dispatchEvent(new wn(e.id,"leave")):"enter"===t&&dispatchEvent(new wn(e.id,"view")))}}}return{}}(n,e),c=K(i),s=n?i:null!==c&&void 0!==c?c:{},u=Object(he.b)(n,(null===n||void 0===n?void 0:n.id)||0,s);return r.a.createElement(r.a.Fragment,null,e?u.map((function(e){var t=e.item,n=e.key;return t&&r.a.createElement(gn,{key:n,movieItem:t})})):u.map((function(e){var t=e.props,n=e.key,a=e.item;return a&&r.a.createElement(Mn,{clearMovieId:o,movieViewItem:a,key:n},r.a.createElement(ge.a.div,{key:n,className:en.a.transitionDiv,style:t},r.a.createElement(gn,{movieItem:a})))})),a&&r.a.createElement(de,{fixed:!0,darken:!0,delay:700}))}),(function(){return!0})),Cn=n(18),Tn=n.n(Cn),Rn=n(31),Ln=n(91),xn=n.n(Ln),Fn=n(62),Pn=n.n(Fn),An=k.a.getPosterSrcPathPrefix,Vn=function(e){var t=e.item;return r.a.createElement("div",{className:Pn.a.root},Ct(t)?r.a.createElement(r.a.Fragment,null,r.a.createElement(Et,{backGroundUrl:"url(".concat(An("300")).concat(t.poster_path,")"),movie:t,poster_path:t.poster_path,className:Pn.a.image}),r.a.createElement("div",{className:Pn.a.info},r.a.createElement("h3",{className:Pn.a.movieTitle,onClick:function(){return function(e){return S.a.dispatch(Object(pt.b)(e))}(t)}},t.title),r.a.createElement("div",{className:Pn.a.itemActions},r.a.createElement(qe,{score:t.vote_average,itemView:!0}),r.a.createElement(dt,{item:t,className:Pn.a.actionButtons})))):r.a.createElement(de,{delay:100,darken:!0}))},Un=Object(a.memo)((function(e){var t=e.items,n=Object(he.b)(t,(function(e){return e.id}),Wn);return r.a.createElement(r.a.Fragment,null,n.map((function(e){var t=e.item,n=e.key,a=e.props;return!!t&&r.a.createElement(ge.a.div,{key:n,style:Object(ve.a)({},a,{transform:a.translateX.interpolate((function(e){return e?"translateX(".concat(e,"px)"):""}))})},r.a.createElement(Vn,{item:t}))})))})),Dn={opacity:1,maxHeight:500,translateX:0,paddingBottom:20},Wn={from:Dn,enter:Dn,leave:function(){return function(){var e=Object(Rn.a)(Tn.a.mark((function e(t){return Tn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({maxHeight:0,paddingBottom:0,delay:300}).catch((function(){})),t({opacity:-.2,translateX:300}).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},config:{duration:500,easing:Le.b},unique:!0},Hn=function(e){var t=e.itemType,n=Lt({name:t}),i=n.items,c=n.totalPagesUI,s=n.pageUI,u=n.isLoading,l=G("page"),m=Object(o.a)(l,2),d=m[0],v=m[1];Object(a.useEffect)((function(){!d&&v(1)}),[v,d]);var f="favorite"===t?"Favorites":"Watchlist";return r.a.createElement("div",{className:xn.a.root},r.a.createElement("div",{className:xn.a.head},r.a.createElement("h2",{className:xn.a.title},f),c>1&&r.a.createElement(ce,{totalPages:c})),u&&r.a.createElement(de,{darken:!0,fixed:!0,delay:750}),r.a.createElement(be,{page:s},(function(){return r.a.createElement(Un,{items:i})})))},Bn=function(){return Ne(),r.a.createElement(Hn,{itemType:"watchlist"})},Xn=function(){return Ne(),r.a.createElement(Hn,{itemType:"favorite"})},qn=function(e){var t=e.component,n=e.render,a=Object(se.a)(e,["component","render"]),o=F().isAuth;return r.a.createElement(Pt.a,Object.assign({},a,{render:function(e){return o?t?r.a.createElement(t,e):n?n(e):null:r.a.createElement(rt,null)}}))},Jn=r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Yt,null)}}),r.a.createElement(Pt.a,{path:"/search",render:function(){return r.a.createElement(Ft,null)}}),r.a.createElement(qn,{path:"/favorites",render:function(){return r.a.createElement(Xn,null)}}),r.a.createElement(qn,{path:"/watchlist",render:function(){return r.a.createElement(Bn,null)}}),r.a.createElement(Pt.a,{path:"/account",render:function(){return r.a.createElement(rt,null)}}));t.default=function(){var e=P();return Object(a.useEffect)((function(){console.log("loaded movie-ratings-app v1.0"),sessionStorage.clear(),Object(w.n)().then((function(e){return S.a.dispatch(Object(M.c)(e))})).catch(console.error)}),[]),r.a.createElement("div",{className:X.a.root},r.a.createElement(W,null),r.a.createElement("main",{className:X.a.main,id:"main-container"},r.a.createElement(H.a,null,e?r.a.createElement(Pt.a,{render:function(e){var t=e.location;return t.search.includes("movieId")?r.a.createElement(Nn,null):r.a.createElement(Pt.c,{location:t},Jn)}}):r.a.createElement(Pt.c,null,Jn)),!e&&r.a.createElement(Nn,null)))}},168:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o);n(154),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(155);var c=n(63),s=n(50),u=n(15),l=n(213),m=n(6),d=n(112),v=n.n(d);window.worker=new v.a,window.worker.onmessage=m.t,"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}));!function(){var e=n(167).default;i.a.render(r.a.createElement(s.a,{store:u.a},r.a.createElement(c.a,{basename:"/movie-ratings-app/"},r.a.createElement(l.b,{injectFirst:!0},r.a.createElement(e,null)))),document.getElementById("root"))}()},24:function(e,t,n){e.exports={root:"home-page_root__2-E_q",content:"home-page_content__2DYa5",sectionSpotlight:"home-page_sectionSpotlight__234NV",sectionTitle:"home-page_sectionTitle__ND_aN",sectionContentWrapper:"home-page_sectionContentWrapper__1qtbg",sectionContent:"home-page_sectionContent__3oypc",gridContainer:"home-page_gridContainer__3QeH7",gridItem:"home-page_gridItem__Q70rq",nowPlayingContainer:"home-page_nowPlayingContainer__3GXQT",mainMovieItem:"home-page_mainMovieItem__2yXC8",subMovieItemContainerWrapper:"home-page_subMovieItemContainerWrapper__3Twb0",subMovieItemContainer:"home-page_subMovieItemContainer__4tiGn",subMovieItemContainerItem:"home-page_subMovieItemContainerItem__2zsRL",hoveredBox:"home-page_hoveredBox__bpY7K",hoveredBg:"home-page_hoveredBg__2OVsD"}},25:function(e,t,n){e.exports={root:"movie-view-actions_root__1keFE",iconWrapper:"movie-view-actions_iconWrapper__373Yc",rotateLoading:"movie-view-actions_rotateLoading__1IIst",icon:"movie-view-actions_icon__3FBHQ",ratingModalContainer:"movie-view-actions_ratingModalContainer__qWecy",ratingModal:"movie-view-actions_ratingModal__1pStS",removeButton:"movie-view-actions_removeButton__3q4JD",showAuth:"movie-view-actions_showAuth__1NDq0",xButton:"movie-view-actions_xButton__3q70E",toolTip:"movie-view-actions_toolTip__23lw6",mobileSubmit:"movie-view-actions_mobileSubmit__1N0Va"}},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return m}));var a,r=n(18),o=n.n(r),i=n(9),c=n(31),s=n(6),u=n(12),l=(u.a.buildFetchMovieSearchUrl,u.a.itemsPerPageUI,u.a.getItemsBrowseUrl);function m(e){var t=void 0,n=void 0;return"favorite"!==e&&"watchlist"!==e||(t=function(t){return{type:a.UNSHIFT_TO_LIST_ITEMS,payload:t,name:e}},n=function(t){return{type:a.REMOVE_FROM_LIST_ITEMS,payload:t,name:e}}),{clearFetchedMovies:function(){return{type:a.CLEAR_FETCHED_MOVIES,name:e}},fetchMoviesStart:function(){return{type:a.FETCH_MOVIES_START,name:e}},fetchMoviesSuccess:function(t,n){return{type:a.FETCH_MOVIES_SUCCESS,payload:{data:t,searchTerm:n},name:e}},fetchMoviesFailure:function(t){return{type:a.FETCH_MOVIES_FAILURE,payload:t,name:e}},fetchMoviesAsync:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var r=Object(c.a)(o.a.mark((function r(c){var u,m,d,v;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("search"!==e||n){r.next=2;break}return r.abrupt("return");case 2:return c(t.fetchMoviesStart()),r.prev=3,r.next=6,fetch(l(e,n,a));case 6:if((u=r.sent).ok){r.next=14;break}return r.next=10,u.json();case 10:m=r.sent,c(t.fetchMoviesFailure(m)),r.next=20;break;case 14:return r.next=16,u.json();case 16:d=r.sent,Object(s.m)(d.results),v=Object(i.a)({},d,{results:Object(s.c)(d.results,a)}),c(t.fetchMoviesSuccess(v,n));case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(3),c(t.fetchMoviesFailure({errors:["Internal server error."]}));case 25:case"end":return r.stop()}}),r,null,[[3,22]])})));return function(e){return r.apply(this,arguments)}}()},fetchMoreMoviesStart:function(){return{type:a.FETCH_MORE_MOVIES_START,name:e}},fetchMoreMoviesSuccess:function(t,n){return{type:a.FETCH_MORE_MOVIES_SUCCESS,payload:{results:t,fetchedPage:n},name:e}},fetchMoreMoviesFailure:function(t){return{type:a.FETCH_MORE_MOVIES_FAILURE,payload:t,name:e}},fetchMoreMoviesAsync:function(t){for(var n=this,a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return function(){var a=Object(c.a)(o.a.mark((function a(i,c){var u,m,d,v,f;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=Object(s.j)("s")||"",i(n.fetchMoreMoviesStart()),a.prev=2,a.next=5,fetch(l(e,u,t));case 5:if((m=a.sent).ok){a.next=13;break}return a.next=9,m.json();case 9:d=a.sent,i(n.fetchMoreMoviesFailure(d)),a.next=19;break;case 13:return a.next=15,m.json();case 15:v=a.sent,Object(s.m)(v.results),f=Object(s.c)(v.results,t),i(n.fetchMoreMoviesSuccess(f,t));case 19:a.next=24;break;case 21:a.prev=21,a.t0=a.catch(2),i(n.fetchMoreMoviesFailure({errors:["Internal server error."]}));case 24:return a.prev=24,r.length&&i(n.fetchMoreMoviesAsync.apply(n,r)),a.finish(24);case 27:case"end":return a.stop()}}),a,null,[[2,21,24,27]])})));return function(e,t){return a.apply(this,arguments)}}()},checkIfFetchMore:function(t){var n=this;return function(){var a=Object(c.a)(o.a.mark((function a(r,i){var c,u,l,m,d,v,f,p;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&"trendingWeek"!==e){a.next=2;break}return a.abrupt("return");case 2:if(c=i()[e],u=c.apiFetchedPages,l=c.searchData,!c.isFetchingMore){a.next=5;break}return a.abrupt("return");case 5:m=Object(s.a)(t),d=Object(s.a)(t,"next"),v=(null===l||void 0===l?void 0:l.total_pages)||0,p=[],(f=function(e){return e>0&&e<=v&&!u.includes(e)})(d)&&p.push(d),f(m)&&p.push(m),f(m-1)&&p.push(m-1),f(m-2)&&p.push(m-2),p.length&&r(n.fetchMoreMoviesAsync.apply(n,p));case 15:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},unshiftToFavorites:t,removeFromListItems:n}}!function(e){e.FETCH_MOVIES_START="FETCH_MOVIES_START",e.FETCH_MOVIES_SUCCESS="FETCH_MOVIES_SUCCESS",e.FETCH_MOVIES_FAILURE="FETCH_MOVIES_FAILURE",e.FETCH_MORE_MOVIES_START="FETCH_MORE_MOVIES_START",e.FETCH_MORE_MOVIES_SUCCESS="FETCH_MORE_MOVIES_SUCCESS",e.FETCH_MORE_MOVIES_FAILURE="FETCH_MORE_MOVIES_FAILURE",e.CLEAR_FETCHED_MOVIES="CLEAR_FETCHED_MOVIES",e.UNSHIFT_TO_LIST_ITEMS="UNSHIFT_TO_LIST_ITEMS",e.REMOVE_FROM_LIST_ITEMS="REMOVE_FROM_LIST_ITEMS"}(a||(a={}))},32:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e.SET_MOVIE_VIEW="SET_MOVIE_VIEW",e.CLEAR_MOVIE_VIEW="CLEAR_MOVIE_VIEW"}(a||(a={}));var r=function(e){return{type:a.SET_MOVIE_VIEW,payload:e}}},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));var a=function(e){return e*(2-e)},r=function(e){return--e*e*e+1},o=function(e){return 1- --e*e*e*e}},39:function(e,t,n){e.exports={root:"app-bar_root__ZaWLU",logo:"app-bar_logo__gW0P4",toolBar:"app-bar_toolBar__3tX9V",navItem:"app-bar_navItem__EZmlQ",navItemIcon:"app-bar_navItemIcon__3IKWo",avatar:"app-bar_avatar__1X2-X",navItemTxt:"app-bar_navItemTxt__huMFw",isOpen:"app-bar_isOpen__35lBP",onNavHover:"app-bar_onNavHover__K89v7"}},42:function(e,t,n){e.exports={runAnimation:"movie-result-item_runAnimation__X9hb_",onViewRest:"movie-result-item_onViewRest__1-46_",root:"movie-result-item_root__1UwRT",content:"movie-result-item_content__1TfaJ",wrapper:"movie-result-item_wrapper__3XDt2",header:"movie-result-item_header__1Vzu4",title:"movie-result-item_title__39tTB",year:"movie-result-item_year__1Mho9",overViewSection:"movie-result-item_overViewSection__38QXw",info:"movie-result-item_info__3nKmA",loadingPulse:"movie-result-item_loadingPulse__1B3cH",opacityPulse:"movie-result-item_opacityPulse__2XXIc"}},43:function(e,t,n){e.exports={root:"movie-result-skeleton_root__3qHsq",imageWrapper:"movie-result-skeleton_imageWrapper__33o31",opacityPulse:"movie-result-skeleton_opacityPulse__1Z9f0",image:"movie-result-skeleton_image__2mssJ",content:"movie-result-skeleton_content__2DMMu",wrapper:"movie-result-skeleton_wrapper__21vpy",header:"movie-result-skeleton_header__2B94f",title:"movie-result-skeleton_title__2zcIy",year:"movie-result-skeleton_year__2u-ar",info:"movie-result-skeleton_info__2zErA",infoWrapper:"movie-result-skeleton_infoWrapper__L_6pL",circle:"movie-result-skeleton_circle__1qM-d",loadingPulse:"movie-result-skeleton_loadingPulse__2GBI2"}},48:function(e,t,n){e.exports={root:"movie-view-info_root__29ehZ",title:"movie-view-info_title__2UGWO",sideInfoItem:"movie-view-info_sideInfoItem__-MyRA"}},57:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),function(e){e.SET_USER="SET_USER",e.CLEAR_USER="CLEAR_USER"}(a||(a={}));var r=function(e){return{type:a.SET_USER,payload:e}},o=function(){return{type:a.CLEAR_USER}}},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"o",(function(){return O})),n.d(t,"p",(function(){return w})),n.d(t,"c",(function(){return j})),n.d(t,"t",(function(){return y})),n.d(t,"m",(function(){return S})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return M})),n.d(t,"e",(function(){return N})),n.d(t,"s",(function(){return C})),n.d(t,"j",(function(){return T})),n.d(t,"d",(function(){return R})),n.d(t,"v",(function(){return L})),n.d(t,"q",(function(){return x})),n.d(t,"l",(function(){return F})),n.d(t,"k",(function(){return P})),n.d(t,"u",(function(){return A})),n.d(t,"n",(function(){return V})),n.d(t,"a",(function(){return H})),n.d(t,"f",(function(){return B})),n.d(t,"g",(function(){return X})),n.d(t,"r",(function(){return q}));var a=n(18),r=n.n(a),o=n(31),i=n(5),c=n(12),s=n(22),u=n(41),l=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"makeMovieImgSessionObj",value:function(t){var n,a=e.CANVAS,r=e.CONTEXT;if(!r)throw new Error("canvas context not supported");var o,i,c,s=-4,u={r:0,g:0,b:0},l="",m=0;i=a.height=t.naturalHeight||t.offsetHeight||t.height,o=a.width=t.naturalWidth||t.offsetWidth||t.width,r.drawImage(t,0,0);try{n=r.getImageData(0,0,o,i),l=a.toDataURL("image/jpeg",.1)}catch(d){throw console.error(d),new Error(d)}for(c=n.data.length;(s+=32)<c;)++m,u.r+=n.data[s],u.g+=n.data[s+1],u.b+=n.data[s+2];return u.r=~~(u.r/m),u.g=~~(u.g/m),u.b=~~(u.b/m),{jpgData:l,averageColor:"rgb(".concat(u.r,", ").concat(u.g,", ").concat(u.b,")")}}}]),e}();l.CANVAS=document.createElement("canvas"),l.CONTEXT=l.CANVAS.getContext&&l.CANVAS.getContext("2d");var m=l,d=n(35),v=n(34),f=n(89),p=function(e){Object(v.a)(n,e);var t=Object(d.a)(n);function n(e,a){return Object(s.a)(this,n),t.call(this,"imageData",{detail:{movieId:e,imgData:a}})}return n}(Object(f.a)(CustomEvent)),h=c.a.buildFetchMovieViewUrl,g=c.a.newSessionUrl,_=c.a.getAccountUrl,b=c.a.itemsPerPageUI;function E(){return window.innerWidth<=600}function O(e,t,n){var a=Object(i.a)(e,3),r=a[0],o=a[1],c=a[2],s=Object(i.a)(t,3),u=s[0],l=s[1],m=s[2],d=Math.abs(r-u)*n,v=Math.abs(o-l)*n,f=Math.abs(c-m)*n;return[r<u?r+d:r-d,o<l?o+v:o-v,c<m?c+f:c-f]}function w(e){var t,n,a,r=Object(i.a)(e,3),o=r[0],c=r[1],s=r[2];if(o/=360,s/=100,0===(c/=100))t=n=a=s;else{var u=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},l=s<.5?s*(1+c):s+c-s*c,m=2*s-l;t=u(m,l,o+1/3),n=u(m,l,o),a=u(m,l,o-1/3)}var d=function(e){var t=Math.round(255*e).toString(16);return 1===t.length?"0"+t:t};return"#".concat(d(t)).concat(d(n)).concat(d(a))}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={},a=20*(t-1);return e.forEach((function(e,t){var r=a+t;n[r]=e,n[r].key=r})),n}function y(e){var t=e.data,n=t.blobUrl,a=t.id;if(sessionStorage.getItem(String(a)))URL.revokeObjectURL(n);else{var r=new Image;r.crossOrigin="anonymous",r.onload=function(){try{var e=m.makeMovieImgSessionObj(r);t=e,n=a,sessionStorage.setItem(String(n),JSON.stringify(t)),dispatchEvent(new p(a,e))}catch(o){console.error(o)}var t,n},r.src=n}}function S(e){if(e){var t,n=Array.isArray(e);t=n?e.filter((function(e){var t=e.id;return e.poster_path&&!sessionStorage.getItem(String(t))})):[e],n&&0===t.length||window.worker.postMessage(t)}}function I(e){var t,n=sessionStorage.getItem(String(e));return n&&(t=JSON.parse(n)),t}var k=["January","February","March","April","May","June","July","August","September","October","November","December"];function M(e){var t=e.split("-").map((function(e){return Number(e)})),n=k[t[1]-1],a=t[2],r=t[0];return"".concat(n," ").concat(a,", ").concat(r)}var N=new Intl.NumberFormat("en-US",{currency:"USD"}).format;function C(e){var t=Math.floor(e/60),n=e%60;return"".concat(t,"h ").concat(n,"m")}function T(e){var t=window.location.hash.split("?")[1];return R(new URLSearchParams(t).get(e))}function R(e){if(null===e)return null;var t=Number(e);return Object.is(t,NaN)?e:t}function L(e,t){var n=window.location.hash.split("?"),a=Object(i.a)(n,2),r=a[0],o=a[1],c=new URLSearchParams(o);null===t?c.delete(e):c.set(e,String(t)),window.location.hash=r.substr(1)+"?"+c.toString()}function x(e){return!!e&&"budget"in e}function F(e){var t;return"number"===typeof e?t=e:(t=e.id,S(e)),new Promise((function(e){fetch(h(t)).then((function(e){return e.json()})).then(e).catch(console.error)}))}function P(e,t){return new Promise((function(n){fetch(e,t).then((function(e){return e.json()})).then(n).catch(console.log)}))}function A(){var e;null===(e=document.scrollingElement)||void 0===e||e.scrollTo(0,0)}function V(){return U.apply(this,arguments)}function U(){return(U=Object(o.a)(r.a.mark((function e(){var t,n,a,o,i,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("session_id")){e.next=23;break}if(a=new URLSearchParams(window.location.search),o=a.get("request_token"),i=a.get("approved"),!o||!i||"true"!==i){e.next=20;break}return e.prev=6,e.next=9,D(o);case 9:c=e.sent,t=_(c),alert("Successfully logged in!"),localStorage.setItem("session_id",c),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(6),e.t0;case 18:e.next=21;break;case 20:throw"No user logged in";case 21:e.next=24;break;case 23:t=_(n);case 24:return e.next=26,fetch(t);case 26:return s=e.sent,e.next=29,s.json();case 29:return e.abrupt("return",e.sent);case 30:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}function D(e){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",body:JSON.stringify({request_token:t}),headers:{"Content-Type":"application/json"}},e.next=3,fetch(g,n);case 3:return a=e.sent,e.next=6,a.json();case 6:return o=e.sent,e.abrupt("return",o.session_id);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",n=0;switch(t){case"previous":n=-b;break;case"next":n=b}return Math.ceil((e*b+n)/20)||1}var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hash;return("#"===e[0]?e.substr(1):e.includes("#")?e.split("#")[1]||"":e).split("?")[0]||"/"},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hash;return("#"===e[0]?e.substr(1):e.includes("#")?e.split("#")[1]||"":e).split("?")[1]||""};function q(e){return new Date(e.expires_at).getTime()-Date.now()>3e5}},60:function(e,t,n){e.exports={root:"items-scroll-x_root__3c9UL",noMoviesFound:"items-scroll-x_noMoviesFound__2-fDP",relatedMovieItemWrapper:"items-scroll-x_relatedMovieItemWrapper__EHdJ7",relatedMovieItem:"items-scroll-x_relatedMovieItem__3fqg8",noPoster:"items-scroll-x_noPoster__2sOrv",isLoadingItem:"items-scroll-x_isLoadingItem__1RwSn",loadingPulse:"items-scroll-x_loadingPulse__2-Z61",opacityPulse:"items-scroll-x_opacityPulse__2aTxh"}},61:function(e,t,n){e.exports={root:"movie-view-item_root__29mJy",mainInfo:"movie-view-item_mainInfo__3aRXn",movieItem:"movie-view-item_movieItem__cnJAR",sideInfo:"movie-view-item_sideInfo__2gth1",mobileOverview:"movie-view-item_mobileOverview__PuMxJ",mobileRateActions:"movie-view-item_mobileRateActions__gs6h4",loadingPulse:"movie-view-item_loadingPulse__2TSh7",opacityPulse:"movie-view-item_opacityPulse__3OJ1H"}},62:function(e,t,n){e.exports={root:"list-item_root__3K_Eq",image:"list-item_image__8W0Zw",info:"list-item_info__3wCV1",movieTitle:"list-item_movieTitle__3zky-",itemActions:"list-item_itemActions__AfTc2",actionButtons:"list-item_actionButtons__5ncys"}},74:function(e,t,n){e.exports={root:"search-bar_root__3CzrZ",bar:"search-bar_bar__2gGAM",suggestionsDropdown:"search-bar_suggestionsDropdown__2UdGS",loadingPulse:"search-bar_loadingPulse__TFS67",opacityPulse:"search-bar_opacityPulse__1lUZ8"}},77:function(e,t,n){e.exports={root:"auth-page_root__Ocxm3",userField:"auth-page_userField__2Rh--"}},90:function(e,t,n){e.exports={root:"movie-item-image_root__1JXgj",image:"movie-item-image_image__X04m2",imageIcon:"movie-item-image_imageIcon__31gPF",loadingPulse:"movie-item-image_loadingPulse__hFBnd",opacityPulse:"movie-item-image_opacityPulse__3iP0F"}},91:function(e,t,n){e.exports={root:"items-list_root__1f0lq",head:"items-list_head__1zGqy",title:"items-list_title__2oh11"}},97:function(e,t,n){e.exports={root:"App_root__27yrb",main:"App_main__1a1JF"}},98:function(e,t,n){e.exports={root:"loading-spinner_root__11EEJ",darken:"loading-spinner_darken__A_g8a"}}},[[149,1,2]]]);
//# sourceMappingURL=main.f9498dc7.chunk.js.map